#!/usr/bin/python
# Initialize a given database with the version control table

import os,sys

if (len(sys.argv) != 6):
    print "Wrong argument count. Usage: ./initializedb.py [db provider] [db host] [db name] [db user] [db password]"
    sys.exit(0)
repository_path = "${buildout:directory}/${sqlalchemy_migrate:repository_path}"
cmd = "bin/python-console " + repository_path + "/manage.py version_control " + sys.argv[1] + "://" + sys.argv[4] + ":" + sys.argv[5] + "@" + sys.argv[2] + "/" + sys.argv[3] + " " + repository_path
cmd2 = "bin/python-console " + repository_path + "/manage.py version_control " + sys.argv[1] + "://" + sys.argv[4] + ":<password>@" + sys.argv[2] + "/" + sys.argv[3] + " " + repository_path
os.system(cmd)
